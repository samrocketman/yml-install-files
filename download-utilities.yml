versions:
  clair: 4.7.3
  crane: 0.19.1
  cyclonedx: 0.25.0
  docker-buildx: 0.14.0
  docker-compose: 2.26.1
  dumb-init: 1.2.5
  gh: 2.48.0
  gimme: 1.5.5
  git-idm: 946120be3235c6e174d0902e0aa6d4f45afc89aa
  gitleaks: 8.18.2
  goss: 0.4.6
  helm: 3.14.4
  jq: 1.7.1
  kind: 0.22.0
  kubeconform: 0.6.4
  kubectl: 1.30.0
  kubeval: 0.16.1
  kustomize: 5.4.1
  minikube: 1.33.0
  rvm-installer: 1.29.12
  saml2aws: 2.36.15
  yq: 4.43.1
checksums:
  clair:
    darwin: d237fdaedcce3a7c60c49ce21d2fc4b3f7cd2ed92f45364b2565340a1eca5f9b
    linux:
      arm64: b7887b8aabd233a5926ff560af778826547d2eb6da2996dcc7c409ce8e459614
      amd64: aae93e9ba5fb906a498b9ca2532563064b4de105dc666f3f28f5997006817e08
  crane:
    Darwin:
      arm64: a6a3813bd090ff5ad80710a2c1acd88af87f3a47cde68abb073863b1908332e9
      x86_64: d33bc4d25d7cdfbeab8b207ef6571c4722b168ab44fbb473dd2e29acfe894560
    Linux:
      arm64: 7682516ebb031c0856a1353e785052e51be5ea6a2b26a88c67799d3b77797013
      x86_64: 2d02aae72ed748529dc6c8803ce7032a6f413c00e1f2fb6d0247dfd0f1603c8a
  cyclonedx:
    osx:
      arm64: 826c21a2ad146e0542c22fa3bf31f4a744890d89052d597c4461ec6e2302ff2d
      x64: 83ba4871298db3123dbea23f425cf23316827abcdaded16824b925f1bc69446d
    linux:
      arm64: eaac307ca4d7f3ee2a10e5fe898d7ff16c4b8054b10cc210abe6f6d703d17852
      x64: bd26ccba454cc9f12b6860136e1b14117b829a5f27e993607ff526262c5a7ff0
  docker-buildx:
    darwin:
      arm64: dc176f2366609cc2132ae6f08bb2193a32f9fd9354bfd020cf7fa3b8db74840d
      amd64: 27aad97c4352bc2cc50470e09c0f0eaaad850d747e33d0937a386183d0ebb8f5
    linux:
      arm64: 38bf0ea9c48743edb8243f14272be65a2bad7092228068337aea584309ea664c
      amd64: 32f8f17eca35bf2efe6c0e47f40e4692a876f34531b421efc984799a5b41226e
  docker-compose:
    darwin:
      aarch64: 620f5473f0c738b5f7f8409ca26aafca4572668c1ed9e628db5513df970459b4
      x86_64: f6bbd3739b93e625991414ec16a13d7be3e33321bcd618bf19634b92b6ee2a1e
    linux:
      aarch64: c86efb0d6347b72af6690f06fbd30ed17023fe67e23e28647cacb4b3f6bfb451
      x86_64: 2f61856d1b8c9de29ffdaedaa1c6d0a5fc5c79da45068f1f4310feed8d3a3f61
  dumb-init:
    linux:
      aarch64: b7d648f97154a99c539b63c55979cd29f005f88430fb383007fe3458340b795e
      x86_64: e874b55f3279ca41415d290c512a7ba9d08f98041b28ae7c2acb19a545f1c4df
  gh:
    macOS:
      arm64: 41cc85438fcc8088f7aaf450aed958643de9d31028bf8d8a6656813951d63f71
      amd64: d8a23bf38e0e1dd2cdedecb86e7f82805ba6c2317ff977953626d1bffe444c95
    linux:
      arm64: b15bd3d071d727c4d1faffcc1f3e09a348bb093bf5974c36f3afb5b7ffb73a61
      amd64: b280dfa4a0c7df05e5d7f415358a37931d48b35cc21a98905d250ba2bfe97c35
  gimme: 3d565d57ec28edb14be9e540cd3e628607ec5b791e78224c47250d36ce4aedf2
  git-idm: 95c13e4bc7847c992f0b9400106d06d398a91800ee75336cbd5c5b32e9434ae9
  gitleaks:
    darwin:
      arm64: 4280d28c5e32c0d5c3ccd6e4627d1c3dd3055d70665f7d2476668a905086a37d
      x64: cc1975e621e2ffc924ce3d38ff3b9a4f0be51c3cc0a3296e99c893c0962a047d
    linux:
      arm64: 9dcbe517fb5b1b6f502be727645f9813bd7d5ca6d8cc5e23fa57bb717013fefe
      x64: bc699d1a558e8b1a56113507f9047bf380fd97de63d1c23f970e2f23c162ba3b
  goss:
    darwin:
      arm64: a44a9b1409aad082fcb992a9ac333e3904634464a97a2254f7e657a38050b0e5
      amd64: 45f76e47d3b56874093179a47c93dfa454cedb0b95b9236d8df0c1915f7e18ae
    linux:
      arm64: f4c14810ed67eb497ab5274aa6102608178a3ecee711f2d6f618c5b227401d52
      amd64: bc818caf99cbab563126297ec568d98911d61d2d7a25f4f37068b7a7916130b5
  helm:
    darwin:
      arm64: 29d2e0c36e8882c9d189f569c9ae3b8360bd9b24844dd0541b74dc8461d5730c
      amd64: 65251dd05a4d5d4ff887749c9dec43d79d4a93b05c37fa202de9e75099a4f796
    linux:
      arm64: cf0ddc873449c147040c8299d4df6a739bf982104badf0c56f72f383dadc3794
      amd64: 912d3c044f46dcc43c22d073dec7eacf6ba8701dfc7f60688174b3eaa30d3698
  jq:
    macos:
      arm64: 0bbe619e663e0de2c550be2fe0d240d076799d6f8a652b70fa04aea8a8362e8a
      amd64: 4155822bbf5ea90f5c79cf254665975eb4274d426d0709770c21774de5407443
    linux:
      arm64: 4dd2d8a0661df0b22f1bb9a1f9830f06b6f3b8f7d91211a1ef5d7c4f06a8b4a5
      amd64: 5942c9b0934e510ee61eb3e30273f1b3fe2590df93933a93d7c58b81d19c8ff5
  kind:
    darwin:
      arm64: 2628c53ddf4a2de19950df0452176e400e33b8c83834afab93651c2b6f9546bd
      amd64: 32bd46859a98bffdfc2e594850c4147d297b3f93007f8376b6d4a28e82dee29a
    linux:
      arm64: 1326f87d766e6108c4e140238b55a588721ea612c3ab2c242ed291da3d9f7608
      amd64: b543dca8440de4273be19ad818dcdfcf12ad1f767c962242fcccdb383dff893b
  kubeconform:
    darwin:
      arm64: 347010c1f17873728bb359200506c59bb9ac9b7a7e5c26b62ddd541f8fc0c1e0
      amd64: 2f18f340a796f9e1664e76488c29e56ccde2c84f7a40beb10b9d7655968354a3
    linux:
      arm64: ce1f63e4e4f73d0bf5796b91bd85fcfb80432f1bc76a3f8dfcd24d5dbdeb5bc5
      amd64: d095722bf8032abec604dbb2c68f7c77fee55a5b770d1f96d5e3988b3c5faae5
  kubectl:
    darwin:
      arm64: 45cfa208151320153742062824398f22bb6bfb5a142bf6238476d55dacbd1bdd
      amd64: bcfa57d020b8d07d0ea77235ce8012c2c28fefdfd7cb9738f33674a7b16cef08
    linux:
      arm64: 669af0cf520757298ea60a8b6eb6b719ba443a9c7d35f36d3fb2fd7513e8c7d2
      amd64: 7c3807c0f5c1b30110a2ff1e55da1d112a6d0096201f1beb81b269f582b5d1c5
  kubeval:
    darwin: 5b667540e3093a80078262fd9e80a0653024262a049e6e47138f2f2d123df22f
    linux: 476e452f64f19fdb088ae1907973610bcc84263a0c6068918f8a8e461d18fe2b
  kustomize:
    darwin: 3a0f8dba2161500d57103b9fdbef49c248babcc77ac8554661678631f18c417d
    linux:
      arm64: 6e9949d033d058f35c3a6bd67c44c055baf7ecd17f3d3da6e8d9ebc0eedda22b
      amd64: 1c269726e8461b0a52d0f64b1d6c303c2de8dfaa4fb376210548ae626e31c5d8
  minikube:
    darwin:
      arm64: 548994f025ed36f91b9a24ff282674b8534c4745535c0511bbbf3112a603a632
      amd64: 3aa579e09014c25a1a8e813f3d003eff450a809a04f229d89cd8ed70de81f791
    linux:
      arm64: d7afb43f87190331b2aee451eef0bae699c93d0acb7b57404cc6b6d3698033a7
      amd64: 4bfdc17f0dce678432d5c02c2a681c7a72921cb72aa93ccc00c112070ec5d2bc
  rvm-installer: fea24461e98d41528d6e28684aa4c216dbe903869bc3fcdb3493b6518fae2e7e
  saml2aws:
    darwin:
      arm64: d695162d17982a36bfbc40cd81c23c55bdc00ddcce3ab7a8351174e5ecb5a50e
      amd64: 736fe961e50853d6f3494040f00670a78d84414762177bc43b859e845129ad00
    linux:
      arm64: c535b3f153e1e0f25456f1b7d38c126fd16b3e9eb1c96e8e698150dff02d0e86
      amd64: 8903c97f13106e4fc56f6a52df7e5a67a46d4a2db5ed210e47b0c933228275ac
  yq:
    darwin:
      arm64: 9f1063d910698834cb9176593aa288471898031929138d226c2c2de9f262f8e5
      amd64: fdc42b132ac460037f4f0f48caea82138772c651d91cfbb735210075ddfdbaed
    linux:
      arm64: a8186efb079673293289f8c31ee252b0d533c7bb8b1ada6a778ddd5ec0f325b6
      amd64: cfbbb9ba72c9402ef4ab9d8f843439693dfb380927921740e51706d90869c7e1


defaults: &defaults
  # dest could be /usr/local/bin in Docker builds
  dest: ./scratch
  perm: '0755'
  checksum_file: checksums/$(uname)-$(arch).sha256
  os:
    Linux: linux
    Darwin: darwin
  arch:
    x86_64: amd64
    aarch64: arm64
    Darwin:
      i386: amd64
  pre_command: |
    if [ "${checksum_failed:-true}" = true ]; then
      rm -f ${dest}/${utility}
    fi
  # Universal update; see git-idm utility where update is overridden
  update: |
    case "${download}" in
      https://github.com/*)
        owner="$(awk -F/ '{print $4"/"$5}' <<< "${download}")"
        export download=https://github.com/"${owner}"/releases/latest
        eval "${default_download_head}" |
        awk '$1 ~ /[Ll]ocation:/ { gsub(".*/[^0-9.]*", "", $0); print;exit}'
        ;;
      https://dl.k8s.io/release*)
        download=https://dl.k8s.io/release/stable.txt
        extract=cat
        export download extract
        eval "${default_download_extract}" |
        awk '{gsub("v", "", $0); print}'
        ;;
      https://get.helm.sh/*)
        export download=https://github.com/helm/helm/releases/latest
        eval "${default_download_head}" |
        awk '$1 ~ /[Ll]ocation:/ { gsub(".*/[^0-9.]*", "", $0); print;exit}'
        ;;
    esac
  # owner: someuser is also available
  # pre_command: shell scripting available
  # post_command: shell scripting available
utility:
  clair:
    <<: *defaults
    # not available on arm mac
    only: "[ ${os} = linux ] || [ ${arch} = amd64 ]"
    download: https://github.com/quay/clair/releases/download/v${version}/clairctl-${os}-${arch}
  crane:
    <<: *defaults
    # Darwin and Linux
    os:
    # x86_64 and arm64
    arch:
      aarch64: arm64
      Darwin:
        i386: x86_64
    download: https://github.com/google/go-containerregistry/releases/download/v${version}/go-containerregistry_${os}_${arch}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
  cyclonedx:
    <<: *defaults
    os:
      Linux: linux
      Darwin: osx
    arch:
      x86_64: x64
      aarch64: arm64
      Darwin:
        i386: x64
    download: https://github.com/CycloneDX/cyclonedx-cli/releases/download/v${version}/cyclonedx-${os}-${arch}
  docker-buildx:
    <<: *defaults
    download: https://github.com/docker/buildx/releases/download/v${version}/buildx-v${version}.${os}-${arch}
  docker-compose:
    <<: *defaults
    # x86_64 and aarch64 are the two supported architectures.
    arch:
      arm64: aarch64
      Darwin:
        i386: x86_64
    download: https://github.com/docker/compose/releases/download/v${version}/docker-compose-${os}-${arch}
  dumb-init:
    <<: *defaults
    # force default architecture x86_64 and aarch64
    arch:
      Darwin:
        i386: x86_64
    only: "[ ${os} = linux ]"
    download: https://github.com/Yelp/dumb-init/releases/download/v${version}/dumb-init_${version}_${arch}
  gh:
    <<: *defaults
    os:
      Linux: linux
      Darwin: macOS
    extension:
      default: tar.gz
      macOS: zip
    default_download_extract: |
      trap '[ ! -f /tmp/file.zip ] || rm -f /tmp/file.zip' EXIT
      if type -P curl; then
        curl -sSfL ${download} | ${extract}
      else
        wget -q -O - ${download} | ${extract}
      fi
    extract:
      macOS: |
        {
          cat > /tmp/file.zip
          unzip -o -j -d ${dest} /tmp/file.zip '*/bin/gh'
        }
      linux: tar -xzC ${dest}/ --no-same-owner --strip-components=2 gh_${version}_${os}_${arch}/bin/gh
    download: https://github.com/cli/cli/releases/download/v${version}/gh_${version}_${os}_${arch}.${extension}
  gimme:
    <<: *defaults
    download: https://github.com/travis-ci/gimme/archive/refs/tags/v${version}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner --strip-components=1 gimme-${version}/${utility}
  git-idm:
    <<: *defaults
    download: https://raw.githubusercontent.com/samrocketman/git-identity-manager/${version}/git-idm
    update: >
      git ls-remote https://github.com/samrocketman/git-identity-manager.git |
      awk '$2 == "refs/heads/main" {print $1;exit}'
  gitleaks:
    <<: *defaults
    arch:
      x86_64: x64
      aarch64: arm64
      Darwin:
        i386: x64
    download: https://github.com/gitleaks/gitleaks/releases/download/v${version}/gitleaks_${version}_${os}_${arch}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
  goss:
    <<: *defaults
    download: https://github.com/goss-org/goss/releases/download/v${version}/goss-${os}-${arch}
  helm:
    <<: *defaults
    download: https://get.helm.sh/helm-v${version}-${os}-${arch}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner --strip-components=1 ${os}-${arch}/helm
  jq:
    <<: *defaults
    os:
      Linux: linux
      Darwin: macos
    download: https://github.com/jqlang/jq/releases/download/jq-${version}/jq-${os}-${arch}
  kind:
    <<: *defaults
    download: https://github.com/kubernetes-sigs/kind/releases/download/v0.19.0/kind-${os}-${arch}
  kubeconform:
    <<: *defaults
    download: https://github.com/yannh/kubeconform/releases/download/v${version}/kubeconform-${os}-${arch}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
  kubectl:
    <<: *defaults
    download: https://dl.k8s.io/release/v${version}/bin/${os}/${arch}/kubectl
  kubeval:
    <<: *defaults
    only: "[ ${arch} = amd64 ]"
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
    download: https://github.com/instrumenta/kubeval/releases/download/v${version}/kubeval-${os}-${arch}.tar.gz
  kustomize:
    <<: *defaults
    # https://github.com/kubernetes-sigs/kustomize/issues/5359
    only: "! ( [ ${os} = darwin ] && [ ${arch} = arm64 ]; )"
    download: https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv${version}/kustomize_v${version}_${os}_${arch}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
  minikube:
    <<: *defaults
    download: https://github.com/kubernetes/minikube/releases/download/v${version}/minikube-${os}-${arch}
  rvm-installer:
    <<: *defaults
    download: https://github.com/rvm/rvm/archive/refs/tags/${version}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner --strip-components=2 rvm-${version}/binscripts/${utility}
    post_command: |
      if [ "${checksum_failed:-true}" = false ]; then
        exit
      fi
      # can be swapped out with a GitHub release proxy
      # escape forward slashes
      base='github.com\/rvm\/rvm'
      sed -i.bak -e 's/\( *\)DEFAULT_SOURCES=(github.com.*/\1DEFAULT_SOURCES=('"${base}"')/' "${dest}/${utility}"
      rm "${dest}/${utility}".bak
      sed -i.bak -e 's/archive\//archive\/refs\/tags\//g' "${dest}/${utility}"
      rm "${dest}/${utility}".bak
      if [ -z "${skip_checksum:-}" ]; then
        exit 6
      fi
  saml2aws:
    <<: *defaults
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
    download: https://github.com/Versent/saml2aws/releases/download/v${version}/saml2aws_${version}_${os}_${arch}.tar.gz
  yq:
    <<: *defaults
    download: https://github.com/mikefarah/yq/releases/download/v${version}/yq_${os}_${arch}
